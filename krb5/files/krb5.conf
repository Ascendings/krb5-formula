{% from "krb5/map.jinja" import krb5_settings as krb5 with context -%}

# Managed by Salt

{%- for key, value in krb5.config.iteritems() %}
  {%- if value is mapping %}
[{{ key }}]
    {%- for key2, value2 in value.iteritems() %}
      {%- if value2 is mapping %}
  {{ key2 }} = {
        {%- for key3, value3 in value2 %}
    {{ key3 }} = {{ value3 }}
        {%- endfor %}
  }
      {%- else %}
  {{ key2 }} = {{ value2 }}
      {%- endif %}
    {%- endfor %}
  {%- else %}
[{{ key }}]

  {% endif -%}
{%- endfor -%}

